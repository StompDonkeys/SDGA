<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Performance Trends - Disc Golf</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&family=Roboto:wght@400;600&display=swap" rel="stylesheet" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="main-header">
    <button class="hamburger" aria-label="Toggle Menu">â˜°</button>
    <h1>Disc Golf Trends</h1>
  </header>

  <nav class="sidebar" style="display: none;">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="rounds.html">Rounds</a></li>
      <li><a href="records.html">Records</a></li>
      <li><a href="players.html">Players</a></li>
      <li><a href="trends.html">Performance Trends</a></li>
      <li><a href="data.csv" download>Download Data</a></li>
    </ul>
  </nav>

  <main>
    <section class="trends-section">
      <h2>ANZAC Day Cup Handicaps & Performance Trends</h2>
      <div class="card">
        <h2>Handicap Table</h2>
        <p>Handicaps for the ANZAC Day Cup at John Knight Memorial Park, based on average +/- scores (adjustment factor 0.8).</p>
        <div class="details">
          <table>
            <tr>
              <th>Player</th>
              <th>Average +/-</th>
              <th>Handicap</th>
              <th>Expected Raw Score</th>
              <th>Expected Net Score</th>
            </tr>
            <tr>
              <td>ArmyGeddon</td>
              <td>-0.93</td>
              <td>0</td>
              <td>55.07</td>
              <td>55.07</td>
            </tr>
            <tr>
              <td>Jobby</td>
              <td>+1.58</td>
              <td>1</td>
              <td>57.58</td>
              <td>56.58</td>
            </tr>
            <tr>
              <td>Youare22</td>
              <td>+15.33</td>
              <td>12</td>
              <td>71.33</td>
              <td>59.33</td>
            </tr>
            <tr>
              <td>Miza</td>
              <td>+4.55</td>
              <td>4</td>
              <td>60.55</td>
              <td>56.55</td>
            </tr>
            <tr>
              <td>Bucis</td>
              <td>+6.83</td>
              <td>5</td>
              <td>62.83</td>
              <td>57.83</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="card">
        <h2>Performance Trends</h2>
        <p>+/- Scores over time at John Knight Memorial Park, showing player consistency and improvement.</p>
        <div class="chart-container">
          <canvas id="performanceChart" class="player-chart"></canvas>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Toggle sidebar
    document.querySelector('.hamburger').addEventListener('click', () => {
      const sidebar = document.querySelector('.sidebar');
      sidebar.style.display = sidebar.style.display === 'none' ? 'block' : 'none';
    });

    document.querySelectorAll('.sidebar ul li a').forEach(link => {
      link.addEventListener('click', () => {
        const sidebar = document.querySelector('.sidebar');
        sidebar.style.display = 'none';
      });
    });

    // Chart.js Performance Trends
    const ctx = document.getElementById('performanceChart').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        datasets: [
          {
            label: 'ArmyGeddon',
            data: [
              { x: '2024-02-17', y: 11 },
              { x: '2024-04-19', y: 7 },
              { x: '2024-08-09', y: -2 },
              { x: '2025-02-17', y: -9 },
              { x: '2025-04-17', y: -4 }
            ],
            borderColor: '#d32f2f',
            backgroundColor: 'rgba(211, 47, 47, 0.2)',
            fill: false,
            tension: 0.1
          },
          {
            label: 'Jobby',
            data: [
              { x: '2024-02-17', y: 10 },
              { x: '2024-04-19', y: 2 },
              { x: '2024-08-09', y: 6 },
              { x: '2025-02-17', y: -4 },
              { x: '2025-04-06', y: -3 }
            ],
            borderColor: '#1976d2',
            backgroundColor: 'rgba(25, 118, 210, 0.2)',
            fill: false,
            tension: 0.1
          },
          {
            label: 'Youare22',
            data: [
              { x: '2025-01-17', y: 26 },
              { x: '2025-04-06', y: 10 },
              { x: '2025-04-17', y: 10 }
            ],
            borderColor: '#388e3c',
            backgroundColor: 'rgba(56, 142, 60, 0.2)',
            fill: false,
            tension: 0.1
          },
          {
            label: 'Miza',
            data: [
              { x: '2024-08-09', y: 10 },
              { x: '2024-08-23', y: 0 },
              { x: '2025-01-17', y: 1 },
              { x: '2025-04-17', y: -1 }
            ],
            borderColor: '#8e24aa',
            backgroundColor: 'rgba(142, 36, 170, 0.2)',
            fill: false,
            tension: 0.1
          },
          {
            label: 'Bucis',
            data: [
              { x: '2024-08-16', y: 11 },
              { x: '2024-08-23', y: 11 },
              { x: '2024-08-30', y: 6 },
              { x: '2025-04-17', y: 3 }
            ],
            borderColor: '#FFB300',
            backgroundColor: 'rgba(255, 179, 0, 0.2)',
            fill: false,
            tension: 0.1
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            type: 'time',
            time: {
              unit: 'month',
              tooltipFormat: 'MMM dd, yyyy',
              displayFormats: {
                month: 'MMM yyyy'
              }
            },
            title: {
              display: true,
              text: 'Date'
            }
          },
          y: {
            title: {
              display: true,
              text: '+/- Score'
            },
            suggestedMin: -10,
            suggestedMax: 30
          }
        },
        plugins: {
          legend: {
            position: 'top'
          },
          tooltip: {
            callbacks: {
              label: (context) => `${context.dataset.label}: ${context.raw.y}`
            }
          }
        }
      }
    });
  </script>
</body>
</html>
